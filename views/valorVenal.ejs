<%- include ('header'); %>


  <div class="container mt-4">
    <p class="text-white">Valor Venal Urbano</p>

    <form id="form-valor-venal" action="/valorvenal" method="post">
      <div class="row">
        <div class="col-md-8 contribuinte">
          <div class="input-group mb-3">
            <span class="input-group-text has-validation" id="basic-addon1">Nome<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-contribuinte" placeholder="Nome do requerente"
              aria-label="Nome do requerente" name="nome"/>
              <div class="invalid-feedback">Você precisa digitar o nome do requerente</div>
          </div>
          
        </div>
        <div class="col-md-4 cpf">
          <div class="input-group mb-3">
            <span class="input-group-text has-validation" id="basic-addon3">CPF<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-cpf" placeholder="Certificado de Pessoa Fisica - CPF"
              aria-label="Certificado de Pessoa Fisica - CPF" name="cpf" />
            <div class="invalid-feedback">Você precisa digitar o CPF do requerente</div>
          </div>
        </div>

        <div class="col-md-12">
          <div class="input-group mb-3 endereco">
            <span class="input-group-text has-validation" id="basic-addon4">Endereço<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-endereco" placeholder="Endereço" aria-label="Endereço"
              name="endereco" />
            <div class="invalid-feedback">Você precisa digitar o endereço do imóvel</div>
          </div>
        </div>
        
        <div class="col-md-4">
          <div class="input-group mb-3 cadImob">
            <span class="input-group-text" id="basic-addon4">Cadastro Imobiliario<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-cad-imob" placeholder="Cadastro Imob."
              aria-label="Cadastro Imobiliario" name="cadImob" />
            <div class="invalid-feedback">Você precisa digitar o cadastro imobiliário do imóvel</div>  
          </div>
        </div>

        <div class="col-md-8">
          <div class="input-group mb-3 valorAvaliacao">
            <span class="input-group-text" id="basic-addon4">Valor (R$)</span>
            <input type="text" class="form-control" id="input-valor-avaliacao" placeholder="Valor da avaliação"
              aria-label="Cadastro Imobiliario" name="valorAvaliacao" />
          </div>
        </div>
        
        <div class="col-md-4 quadra">
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon5">Quadra<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-quadra" placeholder="Numero da quadra"
              aria-label="Numero da quadra" name="quadra" />
            <div class="invalid-feedback">Você precisa digitar a quadra do imóvel</div>
          </div>
        </div>
        <div class="col-md-4 lote">
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon6">Lote<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-lote" placeholder="Numero do Lote"
              aria-label="Numero do Lote" name="lote" >
            <div class="invalid-feedback">Você precisa digitar o lote do imóvel</div>    
          </div>
        </div>
        <div class="col-md-4 bairro">
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon7">Bairro<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-bairro" placeholder="Bairro" aria-label="Bairro"
              name="bairro" />
            <div class="invalid-feedback">Você precisa digitar o nome do bairro</div>
          </div>
        </div>

        <div class="col-md-2 area">
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon8">Área<span style="color: #ff0000;">*</span></span>
            <input type="text" class="form-control" id="input-area" placeholder="Área do imóvel"
              aria-label="Área do imóvel" name="area" />
            <div class="invalid-feedback">Você precisa digitar a área do imóvel</div>  
          </div>
        </div>

        <div class="col-md-6 finalidade">
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon9">Finalidade</span>
            <input type="text" class="form-control" id="input-finalidade" placeholder="Finalidade requerimento"
              aria-label="Finalidade" name="finalidade" />
          </div>
        </div>

        <div class="col-md-4 telefone">
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon10">Telefone</span>
            <input type="text" class="form-control" id="input-telefone" placeholder="Telefone Contribuinte"
              aria-label="Telefone" name="telefone" />
          </div>
        </div>

        <div class="input-group mb-3">
          <select class="form-select" id="inputGroupSelect1" name="situacao">
            <option selected value="1">Avaliação sendo feita</option>
            <option value="2">Esperando retirada</option>
            <option value="3">Finalizado (entregue)</option>
          </select>
        </div>

        <div class="input-group has-validation mb-3">
          <select class="form-select" id="inputGroupSelect2" name="responsavel">
            <option selected value="-1">Quem vai assinar o Requerimento?</option>
            <option value="1">DAIANA PRISCILA KUELKAMP ROSA</option>
            <option value="2">HAROLDO BREHM</option>
            <option value="3">HAROLDO DE LIMA</option>
          </select>
          <div class="invalid-feedback">Você precisa escolher alguém para assinar a declaração</div>
        </div>

      </div>
      <input class="btn btn-secondary" type="button" value="Adicionar" onclick="verificaCampos()"/>
    </form>
    <hr>
    
  </div>

  <div class="container-fluid">
    <table class="table table-dark table-striped table-bordered mt-3 pt-3">
      <thead>
        <tr>
          <th class="text-center" colspan="12">Valor Venal Urbano </th>
        </tr>
        <tr>
          <th scope="col">Requerente</th>
          <th scope="col">Telefone</th>
          <th scope="col">Cadastro Imob.</th>
          <th scope="col">Endereço</th>
          <th scope="col">Bairro</th>
          <th scope="col">Quadra</th>
          <th scope="col">Lote</th>
          <th scope="col">Área</th>
          <th scope="col">Finalidade</th>
          <th scope="col">Situação</th>
          <th scope="col">Valor (R$)</th>
          <th scope="col">Opções</th>
        </tr>
      </thead>
      <tbody >
        <% consulta.forEach(valorvenal => { %>
          <tr>
            <td ><%=valorvenal.nome  %> </td>
            <td><%=valorvenal.telefone  %> </td>
            <td><%=valorvenal.cadImob  %> </td>
            <td><%=valorvenal.endereco  %> </td>
            <td><%=valorvenal.bairro  %> </td>
            <td><%=valorvenal.quadra  %> </td>
            <td><%=valorvenal.lote  %> </td>
            <td><%=valorvenal.area  %> </td>
            <td><%=valorvenal.finalidade  %> </td>
            <td class="situacao-table" <% if (valorvenal.situacao == "Avaliação sendo feita") { %>
              style="color: #f2ee05;"
            <% } %> <% if (valorvenal.situacao == "Esperando retirada") { %>
              style="color: #00e01e;"
            <% } %> <% if (valorvenal.situacao == "Finalizado (entregue)") { %>
              style="color: #00bfe0;"
            <% } %>
              >
              <%=valorvenal.situacao  %> </td>
            <td><%=valorvenal.valor  %> </td>
            <td class="d-flex gap-3 justify-content-center">
              <form class="form-edit" action="<%= `/valorvenaledit/${valorvenal._id}` %>" method="get"><button type="submit" data-bs-toggle="tooltip" data-bs-title="Editar Registro"><i class="fa-solid fa-pencil text-white"></i></button></form>
              <form class="form-print" action="<%= `/valorvenalprint/${valorvenal._id}` %>" method="get"><button type="submit" formtarget="_blank" data-bs-toggle="tooltip" data-bs-title="Imprimir Requerimento"><i class="fa-solid fa-print text-white"></i></button></form>
              <form class="form-print-avaliacao" action="<%= `/valorvenaldeclaracao/${valorvenal._id}` %>" method="get"><button class="button-del" formtarget="_blank" type="submit" data-bs-toggle="tooltip" data-bs-title="Gerar Declaração"><i class="fa-regular fa-file text-white"></i></button></form>
              <form class="form-del" action="<%= `/valorvenaldel/${valorvenal._id}` %>" method="post"><button class="button-del" type="submit" data-bs-toggle="tooltip" data-bs-title="Excluir Registro"><i class="fa-solid fa-trash text-danger"></i></button></form>
            </td>
            
          </tr>
        <% }) %>
      </tbody>
  </div>

  <%- include ('footer'); %>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
      crossorigin="anonymous">
    </script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="js/vanilla-masker.js"></script>
    <script src="js/valorVenal.js"></script>  
    
  </body>
</html>